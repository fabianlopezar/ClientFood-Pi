{"ast":null,"code":"import _toConsumableArray from\"E:/Proyectos/Proyectos React/proyecto pi food/client/ClientFood-Pi/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"E:/Proyectos/Proyectos React/proyecto pi food/client/ClientFood-Pi/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/Proyectos/Proyectos React/proyecto pi food/client/ClientFood-Pi/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/Proyectos/Proyectos React/proyecto pi food/client/ClientFood-Pi/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{postRecipes,getTypeDiet}from\"../redux/actions\";import{useDispatch,useSelector}from\"react-redux\";import s from\"../styles/Create.module.css\";import Footer from\"./Footer.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function controlForm(input){var lim=new RegExp(\"^[0-9]+$\");var errors={};if(!input.title)errors.title=\"You should enter a title\";//if(!input.summary) errors.summary = \"You should enter a summary\";\nif(input.healthScore<0||input.healthScore>100||!lim.test(input.healthScore))errors.healthScore=\"You should enter a number between 0 - 100\";return errors;}export function Create(){var dispatch=useDispatch();var diets=useSelector(function(state){return state.typeDiet;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({title:\"\",summary:\"\",healthScore:\"\",analyzedInstructions:\"\",typeDiet:[]}),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];useEffect(function(){dispatch(getTypeDiet());},[dispatch]);//-------------------- MANEJADORES --------------------------------------------------\n//----------- CHANGE -----------------------\nfunction handleChange(e){setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));setErrors(controlForm(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value))));}//-------- SELECT -----------------------------------\nfunction handleSelect(e){setInput(_objectSpread(_objectSpread({},input),{},{typeDiet:[].concat(_toConsumableArray(input.typeDiet),[e.target.value])}));}//------- SUBMIT ----------------------------------------------\nfunction handleSubmit(e){e.preventDefault();dispatch(postRecipes(input));if(!input.title&&!input.summary){alert(\"Deberia escribir algo X\");}else{alert(\"The recipe was created successfully. ✔️\");setInput({title:\"\",summary:\"\",healthScore:\"\",analyzedInstructions:\"\",typeDiet:[]});}}function handleDelete(e){setInput(_objectSpread(_objectSpread({},input),{},{typeDiet:input.typeDiet.filter(function(el){return el!==e;})}));}//-------------------- RENDERIZADO -----------------------------------------------------------------------------------\nreturn/*#__PURE__*/_jsxs(\"div\",{id:s.fondo,children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"button\",{className:s.btn,children:\"BACK\"})}),/*#__PURE__*/_jsxs(\"div\",{className:s.card,children:[/*#__PURE__*/_jsx(\"h1\",{className:s.title,children:\"Recipe Creator\"}),/*#__PURE__*/_jsxs(\"form\",{className:s.ent,onSubmit:function onSubmit(e){handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title of Recipe\",className:s.input,type:\"text\",value:input.title,name:\"title\",onChange:function onChange(e){handleChange(e);}}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:s.labelError,children:errors.title})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Summary:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Summary of Recipe\",className:s.input,type:\"text\",name:\"summary\",value:input.summary,onChange:function onChange(e){handleChange(e);}}),errors.sumary&&/*#__PURE__*/_jsx(\"p\",{className:s.labelError,children:errors.summary})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Health Score:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\" 0 - 100\",className:s.input,min:\"0\",max:\"100\",type:\"number\",name:\"healthScore\",value:input.healthScore,onChange:function onChange(e){return handleChange(e);},size:\"6\"}),errors.healthScore&&/*#__PURE__*/_jsx(\"p\",{className:s.labelError,children:errors.healthScore})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Analyzed Instructions:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Steps of Recipe\",className:s.input,type:\"text\",name:\"analyzedInstructions\",value:input.analyzedInstructions,onChange:function onChange(e){handleChange(e);}})]}),/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Diet:\"}),/*#__PURE__*/_jsx(\"select\",{className:s.select,onChange:function onChange(e){handleSelect(e);},children:diets===null||diets===void 0?void 0:diets.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el,children:el},el);})}),errors.hasOwnProperty(\"title\")||errors.hasOwnProperty(\"summary\")||errors.hasOwnProperty(\"healthScore\")?/*#__PURE__*/_jsx(\"h2\",{className:s.labelError,children:\"You should complete all the inputs\"}):/*#__PURE__*/_jsx(\"button\",{className:s.btn,type:\"submit\",children:\"Create new Recipe\"})]}),input.typeDiet.map(function(el){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:s.label,children:el}),/*#__PURE__*/_jsx(\"button\",{className:s.button,onClick:function onClick(){return handleDelete(el);},children:\"X\"})]},el);})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","postRecipes","getTypeDiet","useDispatch","useSelector","s","Footer","controlForm","input","lim","RegExp","errors","title","healthScore","test","Create","dispatch","diets","state","typeDiet","setErrors","summary","analyzedInstructions","setInput","handleChange","e","target","name","value","handleSelect","handleSubmit","preventDefault","alert","handleDelete","filter","el","fondo","btn","card","ent","label","labelError","sumary","select","map","hasOwnProperty","button"],"sources":["E:/Proyectos/Proyectos React/proyecto pi food/client/ClientFood-Pi/src/components/Create.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { postRecipes, getTypeDiet } from \"../redux/actions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport s from \"../styles/Create.module.css\"\r\nimport Footer from \"./Footer.jsx\"\r\n\r\nfunction controlForm(input){\r\n  const lim = new RegExp(\"^[0-9]+$\")\r\n  let errors = {}\r\n  if(!input.title) errors.title = \"You should enter a title\";\r\n  //if(!input.summary) errors.summary = \"You should enter a summary\";\r\n  if(input.healthScore < 0 || input.healthScore > 100 || !lim.test(input.healthScore))errors.healthScore=\"You should enter a number between 0 - 100\";\r\n\r\n\r\n  return errors;\r\n}\r\nexport function Create() {\r\n  const dispatch = useDispatch();\r\n  const diets = useSelector((state) => state.typeDiet);\r\n  const [errors,setErrors] = useState({});\r\n  const [input,setInput] = useState({\r\n    title:\"\",\r\n    summary:\"\",\r\n    healthScore:\"\",\r\n    analyzedInstructions:\"\",\r\n    typeDiet:[] \r\n })\r\n\r\n  useEffect(()=>{\r\n    dispatch(getTypeDiet())\r\n  },[dispatch])\r\n\r\n//-------------------- MANEJADORES --------------------------------------------------\r\n//----------- CHANGE -----------------------\r\nfunction handleChange(e){\r\n  setInput({\r\n    ...input,\r\n    [e.target.name]:e.target.value\r\n  })\r\n\r\n  setErrors(controlForm({\r\n    ...input,\r\n    [e.target.name]:e.target.value\r\n  }))\r\n}\r\n//-------- SELECT -----------------------------------\r\nfunction handleSelect(e){\r\n  setInput({\r\n    ...input,\r\n    typeDiet:[...input.typeDiet, e.target.value]\r\n  })\r\n}\r\n//------- SUBMIT ----------------------------------------------\r\nfunction handleSubmit(e){\r\n  e.preventDefault();\r\n  dispatch(postRecipes(input))\r\n  if(!input.title && !input.summary) {\r\n    alert(\"Deberia escribir algo X\")\r\n  }else{ alert(\"The recipe was created successfully. ✔️\")\r\n    setInput({\r\n    title:\"\",\r\n    summary:\"\",\r\n    healthScore:\"\",\r\n    analyzedInstructions:\"\",\r\n    typeDiet:[] \r\n  })}\r\n \r\n}\r\nfunction handleDelete(e){\r\n  setInput({\r\n    ...input,\r\n    typeDiet:input.typeDiet.filter(el=>el!==e)\r\n  })\r\n}\r\n\r\n//-------------------- RENDERIZADO -----------------------------------------------------------------------------------\r\nreturn (\r\n  <div id={s.fondo}>\r\n\r\n    <Link to=\"/home\">\r\n      <button className={s.btn}>BACK</button>\r\n    </Link>\r\n\r\n    <div className={s.card}>\r\n      <h1 className={s.title}>Recipe Creator</h1>\r\n      <form className={s.ent} onSubmit={(e)=>{handleSubmit(e)}}>\r\n      \r\n      <div>\r\n        <label className={s.label}>Title:</label>\r\n        <input placeholder=\"Title of Recipe\" className={s.input} type=\"text\" value={input.title} name=\"title\" onChange={(e)=>{handleChange(e)}}/>\r\n        {errors.title && (<p className={s.labelError}>{errors.title}</p>)}\r\n      </div>\r\n\r\n      <div>\r\n        <label className={s.label}>Summary:</label>\r\n        <input placeholder=\"Summary of Recipe\" className={s.input} type=\"text\" name=\"summary\" value={input.summary} onChange={(e)=>{handleChange(e)}}/>\r\n        {errors.sumary && (<p className={s.labelError}>{errors.summary}</p>)}\r\n      </div>\r\n\r\n      <div>\r\n        <label className={s.label}>Health Score:</label>\r\n        <input placeholder=\" 0 - 100\" className={s.input} min=\"0\" max=\"100\" type=\"number\" name=\"healthScore\" value={input.healthScore} onChange={(e)=>handleChange(e)} size=\"6\"/>\r\n        {errors.healthScore&&(<p className={s.labelError}>{errors.healthScore}</p>)}\r\n      </div>\r\n\r\n      <div>\r\n        <label className={s.label}>Analyzed Instructions:</label>\r\n        <input  placeholder=\"Steps of Recipe\" className={s.input} type=\"text\" name=\"analyzedInstructions\" value={input.analyzedInstructions} onChange={(e)=>{handleChange(e)}} />\r\n      </div>\r\n\r\n      <label className={s.label}>Diet:</label>\r\n      <select className={s.select} onChange={(e)=>{handleSelect(e)}}>\r\n        {diets?.map((el)=>{\r\n          return <option key={el}value={el}>{el}</option>\r\n        })}\r\n      </select>\r\n      {\r\n      errors.hasOwnProperty(\"title\") || errors.hasOwnProperty(\"summary\") ||errors.hasOwnProperty(\"healthScore\")? \r\n      <h2 className={s.labelError}>You should complete all the inputs</h2>\r\n      :<button className={s.btn} type=\"submit\">Create new Recipe</button>\r\n      }\r\n      </form>\r\n      {input.typeDiet.map((el)=>{\r\n      return(\r\n        <div key={el}>\r\n          <h5 className={s.label}>{el}</h5>\r\n          <button   className={s.button} onClick={()=>handleDelete(el)}>X</button>\r\n        </div>\r\n        )\r\n      })}\r\n\r\n    </div>\r\n    <Footer/>\r\n  </div>\r\n  \r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}