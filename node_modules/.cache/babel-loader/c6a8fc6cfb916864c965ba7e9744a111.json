{"ast":null,"code":"const GET_RECIPES = \"GET_RECIPES\";\nconst FILTER_DIET = \"FILTER_DIET\";\nconst GET_BY_DIET = \"GET_BY_DIET\";\nconst FILTER_CREATED = \"FILTER_CREATED\";\nconst ORDER_BY_TITLE = \"ORDER_BY_TITLE\";\nconst ORDER_BY_SCORE = \"ORDER_BY_SCORE\";\nconst GET_BY_TITLE = \"GET_BY_TITLE\";\nconst POST_RECIPES = \"POST_RECIPES\";\nconst GET_ID = \"GET_ID\";\nconst RESET_DETAIL = \"RESET_DETAIL\";\nexport const initialState = {\n  recipes: [],\n  allRecipes: [],\n  details: [],\n  typeDiet: []\n};\nfunction rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const allRecipes = state.allRecipes;\n  switch (action.type) {\n    //---------------------\n    case RESET_DETAIL:\n      return {\n        ...state,\n        details: []\n      };\n    //---------------------\n    case GET_RECIPES:\n      return {\n        ...state,\n        recipes: action.payload,\n        allRecipes: action.payload\n      };\n    //---------------------\n    case GET_BY_TITLE:\n      return {\n        ...state,\n        recipes: action.payload\n      };\n    //---------------------\n    case FILTER_DIET:\n      console.log(\"soy el.TypeDiet\", allRecipes[0].TypeDiet);\n      console.log(\"soy el TypeDiet.name\", allRecipes[0].TypeDiet[0].name); // ketogenic\n      const typeDietFilter = action.payload === \"all\" ? allRecipes : allRecipes.filter(el => {\n        var _el$TypeDiet;\n        return (_el$TypeDiet = el.TypeDiet) === null || _el$TypeDiet === void 0 ? void 0 : _el$TypeDiet.find(el => el.name === action.payload);\n      });\n      //:allRecipes.map(el=>el.TypeDiet.filter(el=>el.name===action.payload))\n      return {\n        ...state,\n        recipes: typeDietFilter\n      };\n    //---------------------\n    case FILTER_CREATED:\n      const createdFilter = action.payload === \"created\" ? allRecipes.filter(el => el.createdInDb) : allRecipes.filter(el => !el.createdInDb);\n      return {\n        ...state,\n        recipes: action.payload === \"all\" ? state.allRecipes : createdFilter\n      };\n    //-------- ORDENAR ALFABETICAMENTE -----------------------------------------\n    case ORDER_BY_TITLE:\n      //-1, se va a situar en un indice menor a b.\n      //1, b se va a situar en un indice menor a a.\n      //0, no hay cambios.\n      let order = action.payload === \"asc\" ? state.recipes.sort(function (a, b) {\n        if (a.title.toLowerCase() > b.title.toLowerCase()) {\n          return 1;\n        }\n        if (b.title.toLowerCase() > a.title.toLowerCase()) {\n          return -1;\n        }\n        return 0;\n      }) : state.recipes.sort(function (a, b) {\n        if (a.title.toLowerCase() > b.title.toLowerCase()) {\n          return -1;\n        }\n        if (b.title.toLowerCase() > a.title.toLowerCase()) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        recipes: order\n      };\n    //---------------------\n    case ORDER_BY_SCORE:\n      let orderScor = action.payload === 'low' ? state.recipes.sort(function (a, b) {\n        if (a.healthScore > b.healthScore) {\n          return 1;\n        }\n        if (b.healthScore > a.healthScore) {\n          return -1;\n        }\n        return 0;\n      }) : state.recipes.sort(function (a, b) {\n        if (a.healthScore > b.healthScore) {\n          return -1;\n        }\n        if (b.healthScore > a.healthScore) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        recipes: orderScor\n      };\n    //---------------------\n    case GET_BY_DIET:\n      return {\n        ...state,\n        typeDiet: action.payload\n      };\n    //---------------------\n    case POST_RECIPES:\n      return {\n        ...state\n      };\n    //---------------------\n    case GET_ID:\n      console.log(\"deberia funcionar reducer by id\");\n      return {\n        ...state,\n        details: action.payload\n      };\n    //---------------------\n    default:\n      return state;\n  }\n}\nexport default rootReducer;","map":{"version":3,"names":["GET_RECIPES","FILTER_DIET","GET_BY_DIET","FILTER_CREATED","ORDER_BY_TITLE","ORDER_BY_SCORE","GET_BY_TITLE","POST_RECIPES","GET_ID","RESET_DETAIL","initialState","recipes","allRecipes","details","typeDiet","rootReducer","state","action","type","payload","console","log","TypeDiet","name","typeDietFilter","filter","el","find","createdFilter","createdInDb","order","sort","a","b","title","toLowerCase","orderScor","healthScore"],"sources":["C:/Users/INTEL i 7/Desktop/HENRY/PI/PI-Food-main/client/src/redux/reducer.js"],"sourcesContent":["const GET_RECIPES = \"GET_RECIPES\";\r\n\r\nconst FILTER_DIET = \"FILTER_DIET\";\r\nconst GET_BY_DIET = \"GET_BY_DIET\";\r\n\r\nconst FILTER_CREATED= \"FILTER_CREATED\"\r\nconst ORDER_BY_TITLE = \"ORDER_BY_TITLE\";\r\nconst ORDER_BY_SCORE = \"ORDER_BY_SCORE\";\r\nconst GET_BY_TITLE = \"GET_BY_TITLE\";\r\n\r\nconst POST_RECIPES= \"POST_RECIPES\";\r\n\r\nconst GET_ID = \"GET_ID\";\r\nconst RESET_DETAIL=\"RESET_DETAIL\"\r\n\r\nexport const initialState = {\r\n  recipes: [],\r\n  allRecipes: [],\r\n  details: [],\r\n  typeDiet: [],\r\n};\r\n\r\nfunction rootReducer(state = initialState, action) {\r\n  const allRecipes = state.allRecipes\r\n  switch (action.type) {\r\n    \r\n\r\n//---------------------\r\ncase RESET_DETAIL:\r\n  return{\r\n    ...state,\r\n    details:[]\r\n  }\r\n//---------------------\r\n    case GET_RECIPES:\r\n      return {\r\n        ...state,\r\n        recipes: action.payload,\r\n        allRecipes: action.payload,\r\n      };\r\n//---------------------\r\n    case GET_BY_TITLE:\r\n      return { \r\n        ...state, \r\n        recipes: action.payload,\r\n      }\r\n//---------------------\r\n    case FILTER_DIET:      \r\n    console.log(\"soy el.TypeDiet\",allRecipes[0].TypeDiet)  \r\n    console.log(\"soy el TypeDiet.name\",allRecipes[0].TypeDiet[0].name)// ketogenic\r\n      const typeDietFilter = action.payload===\"all\"\r\n      ?allRecipes \r\n      :allRecipes.filter(el=>el.TypeDiet?.find(el=>el.name===action.payload))\r\n      //:allRecipes.map(el=>el.TypeDiet.filter(el=>el.name===action.payload))\r\n      return {\r\n        ...state,\r\n        recipes:typeDietFilter\r\n      }\r\n//---------------------\r\n    case FILTER_CREATED:\r\n      const createdFilter=action.payload===\"created\"\r\n      ?allRecipes.filter(el=>el.createdInDb)\r\n      :allRecipes.filter(el=>!el.createdInDb)\r\n      return{\r\n        ...state,\r\n        recipes: action.payload===\"all\"\r\n        ?state.allRecipes\r\n        :createdFilter\r\n      }\r\n//-------- ORDENAR ALFABETICAMENTE -----------------------------------------\r\n      case ORDER_BY_TITLE:\r\n        //-1, se va a situar en un indice menor a b.\r\n        //1, b se va a situar en un indice menor a a.\r\n        //0, no hay cambios.\r\n        let order = action.payload === \"asc\"\r\n        ?state.recipes.sort(function(a,b){\r\n          if(a.title.toLowerCase() > b.title.toLowerCase()){\r\n            return 1;\r\n          }\r\n        if(b.title.toLowerCase() > a.title.toLowerCase()){\r\n          return -1;\r\n          }\r\n          return 0;\r\n        }):\r\n        state.recipes.sort(function(a,b){\r\n          if(a.title.toLowerCase() > b.title.toLowerCase()){\r\n            return -1;\r\n          }\r\n          if(b.title.toLowerCase() > a.title.toLowerCase()){\r\n            return 1;\r\n          }\r\n          return 0;\r\n        })\r\n        return {\r\n          ...state,\r\n          recipes:order\r\n      }\r\n//---------------------\r\ncase ORDER_BY_SCORE:\r\n  let orderScor = action.payload === 'low' ? \r\n  state.recipes.sort(function(a,b) {\r\n      if(a.healthScore > b.healthScore) {\r\n          return 1\r\n      }\r\n      if( b.healthScore > a.healthScore){\r\n          return -1\r\n      }\r\n      return 0\r\n  }) : \r\n  state.recipes.sort(function(a,b) {\r\n      if(a.healthScore > b.healthScore) {\r\n          return -1\r\n      }\r\n      if( b.healthScore > a.healthScore){\r\n          return 1\r\n      }\r\n      return 0\r\n  })\r\n  return{\r\n      ...state ,\r\n      recipes : orderScor\r\n}\r\n//---------------------\r\ncase GET_BY_DIET:\r\n  return {\r\n    ...state,\r\n    typeDiet:action.payload\r\n  }\r\n//---------------------\r\ncase POST_RECIPES:\r\n  return {\r\n    ...state,\r\n  }\r\n//---------------------\r\ncase GET_ID:\r\nconsole.log(\"deberia funcionar reducer by id\")  \r\nreturn {\r\n    ...state,\r\n    details:action.payload\r\n  }\r\n//---------------------\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default rootReducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}